<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../css/style.css"/>
		<link rel="stylesheet" type="text/css" href="../css/mian.css"/>
		<script src="../js/sport.js"></script>
	</head>
	<body>
		<div id="top-wrap">
			<div id="top">
				<div class="logo left"><img src="../img/code/logo.jpg"/></div>
				<div class="menu-box">
					<ul class="menu-list-content">
						<li><a href="javascript:;">首页</a></li>
						<li>
							<a href="javascript:;">发现</a>
							<div class="menu-list discover-box"></div>
						</li>
						<li>
							<a href="javascript:;">同城</a>
							<div class="menu-list"></div>
						</li>
						<li>
							<a href="javascript:;">职位</a>
							<div class="menu-list">
								<a href="javascript:;">职位</a>
								<a href="javascript:;">公司</a>
								<a href="javascript:;">发布职位</a>
							</div>
						</li>
						<li>
							<a href="javascript:;">活动</a>
							<div class="menu-list"></div>
						</li>
						<li>
							<a href="javascript:;">正版素材</a>
							<div class="menu-list"></div>
						</li>
						<li>
							<a href="javascript:;">课程</a>
							<div class="menu-list"></div>
						</li>
						<li>
							<a href="javascript:;">...</a>
							<div class="menu-list"></div>
						</li>
					</ul>
				</div>
				<div class="top-search right"></div>
				<div class="user-center right">
					<div></div>
					<ul></ul>
					<ul></ul>
				</div>
				
			</div>
		</div>
		<!--<script>
			var 
		</script>-->
		<div id="banner">
			<div class="slider" id="slider">
				<div class="unslider" id="unslider">
					<ul class="unslider-wrap" id="unslider-wrap">
						
					</ul>
				</div>
			</div>
			<div style="height: 20px;"></div>
			<div class="advtop">
				<ul class="advtop-ul" id="advtop-ul">
				</ul>
			</div>
		</div>
		<div id="subnav-content-wrap">
			<ul class="subnav-content">
				<li><a href="javascript:;">首页推荐</a></li>
				<li><a href="javascript:;">最新发布</a></li>
				<li><a href="javascript:;">上升最快</a></li>
			</ul>
		</div>
		<div id="content">
			<div class="work-list-box" id="work-list-box">
				<!--<div class="card-box">
					<div class="card-img">
						<a href="javascript:;"></a>
						<img src="../img/list/1.jpg" alt="" />
					</div>
					<div class="card-info">
						<p class="card-info-title">生活很苦，需要甜品 I 卡乐巴巴饮品拍摄 I 当下视觉</p>
						<p class="card-info-type">摄影-静物</p>
						<p class="card-info-item">
							<span class="statistics-view">79</span>
							<span class="statistics-comment">1</span>
							<span class="statistics-tuijian">4</span>
						</p>
					</div>
					<div class="card-item">
						<span class="user-avatar">
							<a href="javascript:;">当下视觉美食摄影</a>
						</span>
						<span class="time">1小时前</span>
					</div>
				</div>-->
			</div>
		</div>
		
		<div id="page_number">
			<a href="javascript:;" id="lbtn"><</a>
			<div id="page">
				
			</div>
			<a href="javascript:;" id="rbtn">></a>
		</div>
		
		<div id="bot_img">
			<img src="../img/bg/bottom.jpg" alt="" />
		</div>
		
		<div></div>
		
		<div id="footer">
			<div class="footer-wrapper">
				<div class="footer-wrapper-top">
					<div class="footer-wrapper-l">
						<a href="javascript:;">移动版</a>
						<a href="javascript:;">关于我们</a>
						<a href="javascript:;">加入站酷</a>
						<a href="javascript:;">用户协议</a>
						<a href="javascript:;">企业服务</a>
						<a href="javascript:;">帮助中心</a>
						<a href="javascript:;">联系我们</a>
						<a href="javascript:;">中文</a>
						<a href="javascript:;">Engilsh</a>
					</div>
					<div class="footer-wrapper-r">
						<a href="javascript:;"></a>
						<a href="javascript:;"></a>
					</div>
				</div>	
				<div class="footer-wrapper-bottom">
					<a href="javascript:;">京ICP备11017824号-4</a><i></i>
					<a href="javascript:;">京ICP证130164号</a><i></i>
					<a href="javascript:;">京公网安备11010502000501号</a><i></i>
					<a href="javascript:;">网络文化经营许可证 京网文[2016]6173-844号</a><i></i>
					<a href="javascript:;">广播电视节目制作经营许可证（京）字第06990号</a>
				</div>
				<div class="footer-wrapper-bottom">
					<a href="javascript:;">网上有害信息举报专区-4</a><i></i>
					<a href="javascript:;">不良信息举报电话：010-56538658</a><i></i>
					<a href="javascript:;">举报邮箱  jubao@zcool.com.cn</a><i></i>
					<a href="javascript:;">联系电话：010-56538600</a>
					<span class="copyrightLink">Copyright © 2006-2018 <a href="javascript:">ZCOOL站酷</a></span>
				</div>
			</div>
			
		</div>
	</body>
</html>
<script>
	var slider = document.getElementById("slider");
	var unslider = document.getElementById("unslider");
	var unsliderWrap = document.getElementById("unslider-wrap");
	var advtopul = document.getElementById("advtop-ul");
	var box = document.getElementById("work-list-box");
	var page = document.getElementById("page");
	var lbtn = document.getElementById("lbtn");
	var rbtn = document.getElementById("rbtn");
	var xhr = new XMLHttpRequest();
	xhr.open("GET","../json/content.json")
	xhr.send();
	xhr.onload = function(){
		var data = JSON.parse(xhr.responseText);
		var arr = data[0].banner
		var bot = data[0].bannerbot
		var con = data[1].content;
		
		//添加主要内容的div
//		page_num(con)
		
		
		//轮播大图
		for(var i = 0 ; i <arr.length;i++){
			var li = document.createElement("li")
			var img = document.createElement("img")
			img.style.width = unslider.offsetWidth + "px"
			img.style.height = unslider.offsetWidth/4 + "px"
			img.src = arr[i];
			li.appendChild(img) 
			li.className = "slide unslider-clone"
			li.style.width = unslider.offsetWidth + "px"
			unsliderWrap.appendChild(li) 
		}
		//轮播
		var slide = document.getElementsByClassName("slide");
		var newobj = slide[0].cloneNode(true);
		unsliderWrap.appendChild(newobj);
		var uwc = unsliderWrap.children;
		autoplay(uwc);
		
		//轮播下的小图
		for(var i = 0 ; i <bot.length;i++){
			var li = document.createElement("li")
			var img = document.createElement("img")
			img.src = bot[i];
			li.appendChild(img)
			li.id = "testac"+i;
			advtopul.appendChild(li) 
		} 	
		//unsliderWrap宽度
		unsliderWrap.style.width = (arr.length+1)*unslider.offsetWidth + "px"
		unsliderWrap.style.height = unslider.offsetWidth/4 + "px"
		slider.style.height = unsliderWrap.style.height
		//调用吸顶函数
		subnavwraptop();
	}
	
	var total = null;
	var index = 1;
	var num = 10;
	page_num ()
	function page_num (){
		var xhr = new XMLHttpRequest();
		xhr.open("GET","../json/content.json")
		xhr.send();
		xhr.onload = function(){
			var data = JSON.parse(xhr.responseText);
			var con = data[1].content;
			var cardBox = "";
			for(var i = (index -1) * num;i < index * num; i++){
				cardBox += 	`<div class="card-box">
								<div class="card-img">
									<a href="javascript:;"></a>
									<img src="${con[i].src}" alt="" />
								</div>
								<div class="card-info">
									<p class="card-info-title">${con[i].title}</p>
									<p class="card-info-type">${con[i].type}</p>
									<p class="card-info-item">
										<span class="statistics-view">${con[i].view}</span>
										<span class="statistics-comment">${con[i].comment}</span>
										<span class="statistics-tuijian">${con[i].tuijian}</span>
									</p>
								</div>
								<div class="card-item">
									<span class="user-avatar">
										<a href="javascript:;">${con[i].avatar}</a>
									</span>
									<span class="time">${con[i].time}</span>
								</div>
							</div>`
			}
			box.innerHTML=cardBox;
			
			total = con.length/num;
			var pagenum = "";
			for(var i = 1;i<=total;i++){
				pagenum += `<a>${i}</a>`
			}
			page.innerHTML = pagenum;
			page.children[index-1].className = "page_active";
		}
	}


	page.onclick = function(e){
		var e = e || event;
		var target = e.target || e.srcElement;
		if(target.nodeName == "A"){
			index = target.innerText;
			page_num();
		}
	}

	lbtn.onclick = function(){
		if(index <= 1){
			index = 1;
		}else{
			index -- ;
		}
		page_num();
	}

	rbtn.onclick = function(){
		if(index >= total){
			index = total;
		}else{
			index ++ ;
		}
		page_num();
	}


	//轮播函数
	function autoplay(uwc){
		var lspan = document.createElement("span")
		lspan.className = "lspan"
		lspan.innerHTML = "<"
		var rspan = document.createElement("span")
		rspan.className = "rspan"
		rspan.innerHTML = ">"
		unslider.appendChild(lspan)
		unslider.appendChild(rspan)
		var span = unslider.querySelectorAll("span")
		var lspan = unslider.querySelectorAll(".lspan")[0]
		var rspan = unslider.querySelectorAll(".rspan")[0]
		

		var index = 0;
		var timer = null;
		timer = setInterval(sport,2000)
		function sport(){
			index ++ ;
			if(index == uwc.length){
				index = 1;
				unsliderWrap.style.left = 0;
			}
			move(unsliderWrap,{left:-index*uwc[0].offsetWidth})
		}
		unsliderWrap.onmouseover = function(){
			clearInterval(timer)
		}
		unsliderWrap.onmouseout = function(){
			timer = setInterval(sport,2000)
		}
		for(var i = 0; i<span.length;i++){
			span[i].onmouseover = function(){
				clearInterval(timer)
			}
			span[i].onmouseout = function(){
				timer = setInterval(sport,2000)
			}
		}
	
		lspan.onclick = function(){
			index -- ;
			if(index == -1){
				index = 0;
				unsliderWrap.style.left = 0;
			}else{
				move(unsliderWrap,{left:-index*uwc[0].offsetWidth})
			}
			
		}
		rspan.onclick = function(){
			if(index == uwc.length-1){
				index = 0;
				unsliderWrap.style.left = 0;
			}
			index ++ ;
			if(index == uwc.length-1){
				index = 5;
			}
			move(unsliderWrap,{left:-index*uwc[0].offsetWidth})
		}
		
	}
	
	
	
	
	
	//吸顶效果
	function subnavwraptop(){
		var subnavwrap = document.getElementById("subnav-content-wrap")
		var subnavwraptop = subnavwrap.offsetTop
		window.onscroll = function(){
			var scr = window.scrollTop || document.documentElement.scrollTop
			if(subnavwraptop <= scr){
				subnavwrap.style.position = "fixed";
				subnavwrap.style.top = 0;
			}else{
				subnavwrap.style.position = "static";
			}
		}
	}
</script>